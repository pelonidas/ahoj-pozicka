<section id="step1-body" class="my-auto pb-28">
    <div class="w-1/5">
        <p class="mb-2 mt-14 text-white">Vyplnenie údajov vám zaberie menej než 8min</p>
    </div>
    <div class="grid grid-cols-2 gap-8">
        <div class="bg-white p-12 rounded-lg">
            <form action="/form/step-2" method="post" id="form2v1">
                <div class="mb-6">
                    <label for="companyName">Názov spoločnosti</label>
                    <div class="relative">
                        <input type="text" id="companyName" class="input-default"
                               placeholder="Firma, s.r.o." name="companyName">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <div class="mb-6">
                    <label for="ico">IČO</label>
                    <div class="relative">
                        <input type="text" id="ico" class="input-default"
                               placeholder="58456734" name="ico">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <div class="mb-6">
                    <label for="companyStreet">Ulica a popisné číslo</label>
                    <div class="relative">
                        <input type="text" id="companyStreet" class="input-default"
                               placeholder="Štúrová 226" name="companyStreet">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <div class="grid grid-cols-7 gap-4">
                    <div class="mb-6 col-span-5">
                        <label for="city" class="block">Obec</label>
                        <div class="relative">
                            <input type="text" id="city" name="city" class="input-default"
                                   placeholder="Bratislava">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                    <div class="col-span-2">
                        <label for="psc" class="block">PSČ</label>
                        <div class="relative">
                            <input type="text" id="psc" name="psc" class="input-default"
                                   placeholder="851 01">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                </div>
                <div class="mb-6 border-2 border-secondary rounded-lg grid grid-cols-2 py-2 px-3">
                    <div>
                        <input type="radio" name="period" id="neurcita">
                        <label for="neurcita">Neurčitú</label>
                    </div>
                    <div class="border-l pl-3">
                        <input type="radio" name="period" id="urcita">
                        <label for="urcita">Určitú</label>
                    </div>
                </div>
                <div class="mb-6 grid grid-cols-2 gap-4 hidden" id="urcita-content">
                    <div>
                        <label for="from">V zamestnaní od</label>
                        <input type="text" id="from" placeholder="01/2021" class="input-default">
                    </div>
                    <div>
                        <label for="till">V zamestnaní do</label>
                        <input type="text" id="till" placeholder="04/2024" class="input-default">
                    </div>
                </div>
                <p>
                    Aký bol tvôj čistý príjem za posledné 3 mesiace
                </p>
                <div class="grid grid-cols-9 gap-4 mb-6">
                    <div class="col-span-3">
                        <label for="january" class="block text-xs">Január</label>
                        <div class="relative">
                            <input type="text" id="january" name="january"
                                   class="input-default"
                                   placeholder="1200€">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                    <div class="col-span-3">
                        <label for="february" class="block text-xs">Február</label>
                        <div class="relative">
                            <input type="text" id="february" name="february"
                                   class="input-default"
                                   placeholder="1200€">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                    <div class="col-span-3">
                        <label for="march" class="block text-xs">Marec</label>
                        <div class="relative">
                            <input type="text" id="march" name="march" class="input-default"
                                   placeholder="1200€">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                </div>
                <p>Iné príjmy</p>
                <div class="border-2 border-secondary py-2 px-3 rounded-lg mb-6" id="radioDiv">
                    <div class="grid grid-cols-2">
                        <div>
                            <input type="radio" id="otherIncome" name="otherIncome" value="iss">
                            <span>Mám aj iné príjmy</span>
                        </div>
                        <div>
                            <p class="text-xs text-secondary/50">Ak áno, môže ti to výrazne pomôcť k schváleniu
                                žiadosti.</p>
                        </div>
                    </div>
                </div>
                <div class="mb-6 hide" id="sideIncome">
                    <label for="sideIncome" class="block">Vaše vedľajšie príjmy</label>
                    <input type="text" id="sideIncome" class="input-default w-1/3"
                           placeholder="270€" name="sideIncome">
                </div>
                <button class="border-2 border-dRed rounded-lg py-2 px-10 text-black/50">Ďalej <i
                            class="fa-solid fa-arrow-right-long"></i></button>
            </form>
        </div>
        <div id="step-2-r" class="text-white -mr-20">
            <h2 class="text-5xl mb-5">Máš záujem o</h2>
            <p class="mb-7">pôžičku na 3800€<br>
                s dobou splácania 4 roky <br>
                a mesačnou splátkou 108,81€ </p>
            <h3 class="text-4xl mb-2">Osobné údaje</h3>
            <div class="mb-2">
                <i class="fa-solid fa-minus"></i> Volam sa <span
                        class="text-primary"><%= formData.fName %> <%= formData.lName %></span>
            </div>
            <div class="mb-2">
                <i class="fa-solid fa-minus"></i> Moje rodné číslo je <span
                        class="text-primary"><%= formData.bNumber %></span>
            </div>
            <div class="mb-2 w-2/3">
                <i class="fa-solid fa-minus"></i> Číslo môjho občianskeho preukazu je <span
                        class="text-primary"><%= formData.id %></span>
            </div>
            <div class="mb-7 w-1/2">
                <i class="fa-solid fa-minus"></i> Možno ma kontaktovať na čísle <span
                        class="text-primary"><%= formData.phoneNum %></span> alebo emailom <span
                        class="text-primary"><%= formData.email %> </span>
            </div>
            <h3 class="text-4xl mb-2">Finančné údaje</h3>
            <div>
                <i class="fa-solid fa-minus"></i> Som <%= formData.job %>
            </div>
        </div>
    </div>
</section>
<script>
    let radioUrcita = document.querySelector('#urcita');
    let radioNeurcita = document.querySelector('#neurcita')
    let content = document.querySelector('#urcita-content')

    radioUrcita.addEventListener('click', () => {
        content.classList.toggle('hidden')
        if (!radioUrcita.checked) {
            content.classList.add('hidden')
        }
    })

    radioNeurcita.addEventListener('click', () => {
        if (radioNeurcita.checked) {
            content.classList.add('hidden')
        }
    })

    const form2v1 = document.querySelector('#form2v1')

    const companyName = document.querySelector('#companyName')
    const ico = document.querySelector('#ico')
    const companyStreet = document.querySelector('#companyStreet')
    const city = document.querySelector('#city')
    const psc = document.querySelector('#psc')
    const january = document.querySelector('#january')
    const february = document.querySelector('#february')
    const march = document.querySelector('#march')

    form2v1.addEventListener('submit', (e) => {
        const companyNameValidation = validateInput(companyName)
        const icoValidation = validateInput(ico)
        const companyStreetValidation = validateInput(companyStreet)
        const cityValidation = validateInput(city)
        const pscValidation = validateInput(psc)
        const januaryValidation = validateInput(january)
        const februaryValidation = validateInput(february)
        const marchValidation = validateInput(march)
        if (!companyStreetValidation || !icoValidation || !companyStreetValidation || !cityValidation || !pscValidation || !januaryValidation || !februaryValidation || !marchValidation) {
            e.preventDefault()
        }

    })


    const validateInput = (input) => {
        const inputValue = input.value.trim();
        if (!inputValue) {
            setErrorFor(input)
            return false
        } else {
            setSuccessFor(input)
            return true
        }
    }

    const setErrorFor = (input, msg = "Pole je nevyplnene") => {
        const parent = input.parentElement
        const icon = parent.querySelector('i')
        icon.classList.remove('fa-check')
        icon.classList.add('fa-xmark')
        icon.classList.remove('text-transparent')
        icon.classList.remove('text-green-400')
        icon.classList.add("text-dRed")

        const div = parent.parentElement
        div.classList.remove('mb-6')
        div.classList.add('mb-3')

        const small = div.querySelector('small')
        small.innerText = msg
        input.className = "input-danger"
    }

    const setSuccessFor = (input) => {
        const parent = input.parentElement
        const icon = parent.querySelector('i')
        icon.classList.remove('fa-xmark')
        icon.classList.add('fa-check')
        icon.classList.remove('text-transparent')
        icon.classList.remove('text-dRed')
        icon.classList.add("text-green-400")

        const div = parent.parentElement
        div.classList.remove('mb-6')
        div.classList.add('mb-3')

        const small = div.querySelector('small')
        small.innerText = " "
        input.className = "input-default"
    }
</script>