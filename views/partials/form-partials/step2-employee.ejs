<section id="step1-body" class="pb-28 form-container">
    <div class="md:w-1/5">
        <p class="form-label">Vyplnenie údajov vám zaberie <span
                    class="text-primary font-medium">menej než 6min</span></p>
        <div class="flex md:hidden text-white items-end font-light justify-center mb-[2rem]">
            <p class="md:hidden leading-none">Vyplnenie formuláru zaberie</p>
            <img src="/images/clock.svg" alt="" class="w-5 mx-2">
            <p class="text-primary leading-none">6min</p>
        </div>
    </div>
    <div class="md:grid md:grid-cols-2 md:gap-24">
        <div class="bg-white p-6 md:p-12 rounded-lg text-secondary">
            <form action="/form/step-2" method="post" id="form2v1">
                <div class="mb-6">
                    <label for="companyName" class="label-default">Názov spoločnosti</label>
                    <div class="relative">
                        <input type="text" id="companyName" class="input-default placeholder-default"
                               placeholder="Firma, s.r.o." name="companyName">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <div class="mb-6">
                    <label for="ico" class="label-default">IČO</label>
                    <div class="relative">
                        <input type="text" id="ico" class="input-default placeholder-default"
                               placeholder="58456734" name="ico">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <div class="mb-6">
                    <label for="companyStreet" class="label-default">Ulica a popisné číslo</label>
                    <div class="relative">
                        <input type="text" id="companyStreet" class="input-default placeholder-default"
                               placeholder="Štúrová 226" name="companyStreet">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <div class="mb-6">
                    <label for="city" class="label-default">Obec</label>
                    <div class="relative">
                        <input type="text" id="city" name="city" class="input-default placeholder-default"
                               placeholder="Bratislava">
                        <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                    </div>
                    <small class="text-xs text-dRed "></small>
                </div>
                <span class="label-default">Zamestnanie mám na dobu </span>
                <div class="mb-6 border-2 border-secondary rounded-lg grid grid-cols-2 py-2 px-3">
                    <div class="flex items-center">
                        <input type="radio" name="period" id="neurcita">
                        <label for="neurcita" class="text-[1rem] font-bold text-secondary/30 ml-2">Neurčitú</label>
                    </div>
                    <div class="border-l pl-3 flex items-center">
                        <input type="radio" name="period" id="urcita">
                        <label for="urcita" class="text-[1rem] font-bold text-secondary/30 ml-2">Určitú</label>
                    </div>
                </div>
                <div class="mb-6 grid grid-cols-2 gap-4 hidden" id="urcita-content">
                    <div>
                        <label for="from" class="md:text-[0.875rem] font-bold md:mb-2">V zamestnaní od<span class="text-[0.625rem] my-auto text-secondary/50 md:leading-[20px] ml-1">- Nepovinné</span></label>
                        <input type="text" id="from" placeholder="01/2021" class="input-default placeholder-default calendar"
                               name="from">
                    </div>
                    <div>
                        <label for="till" class="md:text-[0.875rem] font-bold md:mb-2">V zamestnaní do<span class="text-[0.625rem] my-auto text-secondary/50 md:leading-[20px] ml-1">- Nepovinné</span></label>
                        <input type="text" id="till" placeholder="04/2024" class="input-default placeholder-default calendar" name="till">
                    </div>
                </div>
                <p class="label-default">Aký bol tvôj čistý príjem za posledné 3 mesiace</p>
                <div class="md:grid md:grid-cols-9 md:gap-4 mb-6">
                    <div class="col-span-3">
                        <label for="january" class="md:text-[0.875rem] font-bold md:mb-2">1.mesiac</label>
                        <div class="relative">
                            <input type="text" id="january" name="firstMonth"
                                   class="input-default placeholder-default"
                                   placeholder="1200€">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                    <div class="col-span-3">
                        <label for="february" class="md:text-[0.875rem] font-bold md:mb-2">2.mesiac</label>
                        <div class="relative">
                            <input type="text" id="february" name="secondMonth"
                                   class="input-default placeholder-default"
                                   placeholder="1200€">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                    <div class="col-span-3">
                        <label for="march" class="md:text-[0.875rem] font-bold md:mb-2">3.mesiac</label>
                        <div class="relative">
                            <input type="text" id="march" name="thirdMonth" class="input-default placeholder-default"
                                   placeholder="1200€">
                            <i class="fa-solid fa-1x fa-xmark text-transparent text-dRed"></i>
                        </div>
                        <small class="text-xs text-dRed "></small>
                    </div>
                </div>
                <p class="label-default">Iné príjmy <span
                            class="text-[0.625rem] my-auto text-secondary/50 md:leading-[20px] ml-1">- Nepovinné</span>
                </p>
                <div class="border-2 border-secondary py-2 px-3 rounded-lg mb-6" id="radioDiv">
                    <div class="flex flex-col md:grid md:grid-cols-2">
                        <div class="mb-4 md:mb-0 flex items-center">
                            <input type="radio" id="otherIncome" name="otherIncome" value="iss">
                            <span class="font-bold ml-2">Mám aj iné príjmy</span>
                        </div>
                        <div>
                            <p class="text-xs text-secondary/50">Ak áno, môže ti to výrazne pomôcť k schváleniu
                                žiadosti.</p>
                        </div>
                    </div>
                </div>
                <div class="mb-6 hidden" id="sideIncome">
                    <label for="sideIncome" class="label-default">Vaše vedľajšie príjmy</label>
                    <input type="text" id="sideIncome" class="input-default w-1/3 placeholder-default"
                           placeholder="270€" name="sideIncome">
                </div>
                <button class="border-2 border-dRed rounded-lg py-2 px-10 text-black/50">Ďalej <i
                            class="fa-solid fa-arrow-right-long"></i></button>
            </form>
        </div>
        <div class="text-white h-[45rem] md:block hidden">
            <h2 class="form-heading1 ">Máš záujem o</h2>
            <div class="w-full md:max-w-[420px] md:mb-[2rem]">
                <span class="lg:text-[1.7rem] lg:block leading-[36px]">pôžičku na <span
                            class="text-primary"><%= formData.calcData.money %> €</span></span>
                <span class="lg:text-[1.7rem] lg:block leading-[36px]">s dobou splácania <span
                            class="text-primary"><%= formData.calcData.years %> roky</span></span>
                <span class="lg:text-[1.7rem] lg:block leading-[36px]">a mesačnou splátkou <span
                            class="text-primary"><%= formData.calcData.interest %> €</span></span>
            </div>
            <h3 class="md:text-[2.5rem] mb-4">Osobné údaje</h3>
            <div class="md:text-[1.25rem] ">
                <div class="mb-2 flex items-center">
                    <i class="fa-solid fa-minus md:mr-3"></i>
                    <div>
                        Volám sa <span
                                class="text-primary"> <%= formData.contact.fName %> <%= formData.contact.lName %></span>
                    </div>
                </div>
                <div class="mb-2 flex items-center">
                    <i class="fa-solid fa-minus md:mr-3"></i>
                    <div>
                        Moje rodné číslo je <span
                                class="text-primary"><%= formData.contact.bNumber %></span>
                    </div>
                </div>
                <div class="mb-2 flex w-full md:max-w-[330px]">
                    <i class="fa-solid fa-minus md:pt-1 md:mr-3"></i>
                    <div class="md:leading-[31px]">
                        Číslo môjho občianskeho preukazu je <span
                                class="text-primary"><%= formData.contact.id %></span>
                    </div>
                </div>
                <div class="flex md:leading-[31px] w-full md:max-w-[495px] md:mb-[2rem]">
                    <i class="fa-solid fa-minus md:mr-3 md:pt-1"></i>
                    <div>
                        Možno ma kontaktovať na čísle <span
                                class="text-primary"><%= formData.contact.phoneNum %></span>, alebo emailom <span
                                class="text-primary"><%= formData.contact.email %> </span>
                    </div>
                </div>
                <h3 class="md:text-[2.5rem] mb-4 md:leading-[44px]">Finančné údaje</h3>
                <div class="flex md:items-center">
                    <i class="fa-solid fa-minus md:mr-3"></i>
                    <div class="md:text-[1.25rem] md:leading-[31px]">
                        Som <span class="text-primary"><%= formData.contact.job %></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>

    let radioUrcita = document.querySelector('#urcita');
    let radioNeurcita = document.querySelector('#neurcita')
    let content = document.querySelector('#urcita-content')

    const form2v1 = document.querySelector('#form2v1')
    const companyName = document.querySelector('#companyName')
    const ico = document.querySelector('#ico')
    const companyStreet = document.querySelector('#companyStreet')
    const city = document.querySelector('#city')
    const psc = document.querySelector('#psc')
    const january = document.querySelector('#january')
    const february = document.querySelector('#february')
    const march = document.querySelector('#march')

    radioUrcita.addEventListener('click', () => {
        content.classList.toggle('hidden')
        if (!radioUrcita.checked) {
            content.classList.add('hidden')
        }
    })

    radioNeurcita.addEventListener('click', () => {
        if (radioNeurcita.checked) {
            content.classList.add('hidden')
        }
    })

    form2v1.addEventListener('submit', (e) => {
        const companyNameValidation = validateInput(companyName)
        const icoValidation = validateInput(ico)
        const companyStreetValidation = validateInput(companyStreet)
        const cityValidation = validateInput(city)
        const pscValidation = validateInput(psc)
        const januaryValidation = validateInput(january)
        const februaryValidation = validateInput(february)
        const marchValidation = validateInput(march)
        if (!companyStreetValidation || !icoValidation || !companyStreetValidation || !cityValidation || !pscValidation || !januaryValidation || !februaryValidation || !marchValidation) {
            e.preventDefault()
        }

    })
    const validateInput = (input) => {
        const inputValue = input.value.trim();
        if (!inputValue) {
            setErrorFor(input)
            return false
        } else {
            setSuccessFor(input)
            return true
        }
    }
    const setErrorFor = (input, msg = "Pole je nevyplnene") => {
        const parent = input.parentElement
        const icon = parent.querySelector('i')
        icon.classList.remove('fa-check')
        icon.classList.add('fa-xmark')
        icon.classList.remove('text-transparent')
        icon.classList.remove('text-green-400')
        icon.classList.add("text-dRed")

        const div = parent.parentElement
        div.classList.remove('mb-6')
        div.classList.add('mb-3')

        const small = div.querySelector('small')
        small.innerText = msg
        input.className = "input-danger"
    }

    const setSuccessFor = (input) => {
        const parent = input.parentElement
        const icon = parent.querySelector('i')
        icon.classList.remove('fa-xmark')
        icon.classList.add('fa-check')
        icon.classList.remove('text-transparent')
        icon.classList.remove('text-dRed')
        icon.classList.add("text-green-400")

        const div = parent.parentElement
        div.classList.remove('mb-6')
        div.classList.add('mb-3')

        const small = div.querySelector('small')
        small.innerText = " "
        input.className = "input-default"
    }


</script>